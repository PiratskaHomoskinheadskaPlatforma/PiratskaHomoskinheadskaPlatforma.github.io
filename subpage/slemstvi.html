<div id="container">
    <div class="content">
        <div id="wrapperContent" class="center">
            <h1>Jak se stát šlemem?</h1>
            <p>Aby se bytost stala šlemem Pirátské homoskinheadské platformy, musí vstoupit do skupiny "Zobrazit - Podpalubí" na <a href="https://forum.pirati.cz/">vtipu Pirátské strany</a>.</p>
            <p>Postupuj dle následujícího návodu:</p>
            <img src="images/slem_podpalubi.gif" />
            <p>&nbsp;</p>
            <h1>Seznam šlemů</h1>
            <div id="members">
                <div id="spinner" class="loader"></div>
            </div>
            <script>
                function getMembersFromGraphAPI() {
                    var myUrl = 'https://graph.pirati.cz/deadbeef-babe-f002-000000000121/members';
                    var proxy = 'https://www.whateverorigin.org/get?url=';
                    var finalURL = proxy + encodeURIComponent(myUrl) + '&callback=?';

                    // FETCHING DATA FROM JSON FILE
                    $.getJSON(myUrl, function (data) {
                        // sort alphabetically
                        data.sort( function( a, b ) {
                            a = a.username.toLowerCase();
                            b = b.username.toLowerCase();

                            return a < b ? -1 : a > b ? 1 : 0;
                        });

                        //var obj = $.parseJSON(data);
                        var obj = data; // already parsed as json
                        var member = '';

                        // ITERATING THROUGH OBJECTS
                        $.each(obj, function (key, value) {

                            //CONSTRUCTION OF ROWS HAVING
                            // DATA FROM JSON OBJECT
                            member += "<div class='member'><div class='gixi'></div>" + 
                            value.username + '</div>';
                        });
                        
                        if(member != "") {
                            $("#spinner").hide();
                        }

                        //INSERTING ROWS INTO TABLE 
                        $('#members').append(member);
                        $('.gixi').each(function() { $(this).gixi(); });

                    });
                }

                $(document).ready(function () {
                    getMembersFromGraphAPI();
                });
                </script>
        </div>
    </div>
</div>